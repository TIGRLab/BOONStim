singularity {

    autoMounts=true
    enabled=true

}

// CIFTIFY SPEC
params.simg = "/archive/code/containers/FMRIPREP_CIFTIFY/tigrlab_fmriprep_ciftify_1.3.0.post2-2.3.1-2019-04-04-8ebe3500bebf.img"
params.ciftify_invocation = "/projects/jjeyachandra/boutiques_jsons/invocations/fmriprep_ciftify-1.3.0.post2-2.3.1_invocation.json"
params.ciftify_descriptor = "/projects/jjeyachandra/boutiques_jsons/descriptors/fmriprep_ciftify-1.3.0.post2-2.3.1.json"

// FMRIPREP SPEC
params.anat_invocation = "/projects/jjeyachandra/BOONStim/pipeline/invocations/fmriprep_anat_wf.json"
params.anat_descriptor = "/projects/jjeyachandra/boutiques_jsons/descriptors/fmriprep-1.3.2.json"

// FREESURFER LICENSE
params.license="/opt/quarantine/freesurfer/6.0.0/build/"

// BIDS-APPS SPEC
params.work = "/tmp/"

//Local only for now
process {
    withName: cifti_meshing:fmriprep_anat {
        
        executor = "local"
        errorStrategy = 'retry'
        maxRetries = 3
        queue = "high-moby"
        clusterOptions = "--time=36:00:00 --mem-per-cpu=2048\
         --cpus-per-task=4 --job-name boonstim_ciftify\
         --nodes=1"
                

    }
    
    withName: cifti_meshing:ciftify{

        executor = "local"
        errorStrategy = 'retry'
        maxRetries = 3
        queue = "high-moby"
        clusterOptions = "--time=36:00:00 --mem-per-cpu=2048\
         --cpus-per-task=4 --job-name boonstim_ciftify\
         --nodes=1"

    }

    withName: cifti_meshing:mri2mesh{

        container = "/projects/jjeyachandra/BOONStim/containers/rtms_bayesian/rtms_bayesian_v0.4-2019-09-09-e99bae9f511b.simg"
        executor = "local"
        errorStrategy = 'retry'
        maxRetries = 3
        queue = 'high-moby'
        clusterOptions = "--time=36:00:00 --mem-per-cpu=2048\
         --cpus-per-task=4 --job-name boonstim_ciftify\
         --nodes=1"
        
    }

}

